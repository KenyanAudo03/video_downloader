{% extends "base.html" %} {% block title %}VideoFlow - Media Grabber
{% endblock %} {% block content %} {% load static %}
<link rel="stylesheet" href="{% static 'css/media_grabber/index.css' %}" />

<div class="main-container">
  <div class="category-bar-container">
    <div class="category-bar">
      <div class="category-scroll">
        <button class="category-btn active" data-platform="tiktok">
          TikTok
        </button>
        <button class="category-btn" data-platform="twitter">Twitter/X</button>
        <button class="category-btn" data-platform="instagram">
          Instagram
        </button>
        <button class="category-btn" data-platform="facebook">Facebook</button>
      </div>
    </div>
  </div>

  <div class="functional-division">
    <form id="videoForm" style="width: 100%">
      <div class="form-group">
        <input
          type="url"
          id="grabberVideoUrl"
          class="grabberVideoUrl"
          placeholder="Paste TikTok link here..."
          required
          autocomplete="off"
        />
        <span class="clear-url-icon" id="clearUrlSearch" style="display: none">
          <i class="bx bx-x"></i>
        </span>
        <button type="submit" class="submit-button" id="extractBtn">
          <span id="searchUrlIcon">
            <i class="bx bx-search" style="color: #fff; font-size: 25px"></i>
          </span>
        </button>
      </div>
    </form>

    <div class="loading-container" id="loading" style="display: none">
      <div class="loading-spinner"></div>
      <div class="loading-message">Processing video... Please wait</div>
    </div>

    <div class="results-container" id="result" style="display: none">
      <div class="video-preview">
        <img
          id="thumbnail"
          class="video-thumbnail"
          alt="Video thumbnail"
          style="display: none"
        />
        <div
          class="video-duration"
          id="videoDuration"
          style="display: none"
        ></div>
        <div id="noThumbnail" class="no-thumbnail" style="display: none">
          <i class="bx bx-video"></i>
          <span>No thumbnail available</span>
        </div>
      </div>

      <div class="video-info-section">
        <div class="video-details">
          <div id="title" class="grabber-video-title"></div>
        </div>

        <div class="download-area">
          <div class="filename-info">Download Filename:</div>
          <div class="filename-text" id="filenameDisplay"></div>

          <div class="download-buttons">
            <button
              type="button"
              class="download-button primary-download"
              id="downloadBtn"
            >
              <i class="bx bx-download"></i>
              Download
            </button>
            <button
              type="button"
              class="download-button cancel-download"
              id="cancelBtn"
            >
              Cancel
            </button>
          </div>

          <div class="progress-container" id="progressContainer">
            <div class="progress-bar">
              <div class="progress-fill" id="progressFill"></div>
            </div>
            <div class="progress-text" id="progressText">Downloading... 0%</div>
          </div>

          <div class="status-message" id="downloadStatus"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="powered-by">
    <span>Powered by yt-dlp. Don't close this page during download.</span>
  </div>
</div>

<div class="error-container" id="errorContainer">
  <span id="errorMessage"></span>
</div>
{% include 'media_grabber/index_js.html' %}
{% endblock %}
